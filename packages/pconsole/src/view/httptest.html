<%- include("./header.html") %>
<%- include("./side.html") %>
<!-- 样式 -->
<link href="https://cdn.bootcss.com/prism/1.9.0/themes/prism.min.css" rel="stylesheet">
<link rel="stylesheet" href="/css/httptest.css">
<div class="container" class="addSystem mb150" id="setting" v-cloak>
    <div class="common-title">
        <el-button type="text" @click="goHome">首页</el-button>/
        <el-button type="text" style="color: black;">接口性能测评</el-button>
    </div>
    <div class="common_table_nav">
        <li :class="{active:table==1}" @click="changeTable(1)">HTTP接口测试</li>
    </div>
    <div class="setting-body" v-show="table==1?true:false">
        <el-input placeholder="输入接口地址" v-model.trim="url" class="input-with-select">
        <el-select v-model="method" slot="prepend" placeholder="选择协议" style="width: 100px;">
            <el-option label="GET" value="GET"></el-option>
            <el-option label="POST" value="POST"></el-option>
            <el-option label="PUT" value="PUT"></el-option>
            <el-option label="PATCH" value="PATCH"></el-option>
            <el-option label="DELETE" value="DELETE"></el-option>
        </el-select>
        <el-button slot="append" type="primary" @click="getHttptest">发送请求</el-button>
        </el-input>
        
        <div class="switchTable">
            <h1 class="h1">Request</h1>
            <div class="notice">参数一行一个</div>
            <div class="nav">
                <li :class="{active:checknav==1?true:false}" @click="checknav=1">Body</li>
                <li :class="{active:checknav==2?true:false}" @click="checknav=2">Header</li>
                <li>
                    <select v-model="selectval">
                        <option value="">Content-Type</option>
                        <option value="1">application/xml</option>
                        <option value="2">application/json</option>
                        <option value="3">multipart/form-data</option>
                        <option value="4">application/x-www-form-urlencoded</option>
                    </select>
                </li>
            </div>
            <div class="content">
                <textarea v-show="checknav==1" v-model="requestBodyText" class="textarea" placeholder="key1=value1
key2=value2"></textarea>
                <textarea v-show="checknav==2" v-model="requestHeaderText" class="textarea"></textarea>
            </div>
        </div>
        <div class="switchTable mb150">
            <h1 class="h1">Response</h1>
            <div class="nav">
                <li :class="{active:checknavtwo==1?true:false}" @click="checknavtwo=1">Body</li>
                <li :class="{active:checknavtwo==2?true:false}" @click="checknavtwo=2">Header</li>
                <div class="loading fr" v-show="isLoading"><img src="/images/common/loading-2.gif">HTTP链接请求中，请耐心等待...</div>
            </div>
            <div class="content">
                <div class="textarea">
                    <div class="totaltime">HTTP响应耗时：<span class="red">{{httptestData.duration|toFixed(true)}}</span></div>
                    <div v-show="checknavtwo==1"><pre><code class="language-html" id="viewShowDatas"></code></pre></div>
                    <div v-show="checknavtwo==2"><pre><code class="language-js" id="viewShowHeaders"></code></pre></div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/js/view-httptest.js"></script>
<style scoped>
.el-button+.el-button {
    margin-left: 0;
}
</style>