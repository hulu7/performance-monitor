<%- include("./header.html") %>
<%- include("./side.html") %>
<!-- 样式 -->
<link rel="stylesheet" href="/css/page-detail.css">
<div class="container ajax mb150" id="pagesDetail" v-cloak>
   <div class="common-title">
        <el-button type="text" @click="goHome">首页</el-button>/
        <el-button type="text" @click="goToPages">页面列表</el-button>/
        <el-button type="text" @click="goToPageHistory">页面性能历史数据</el-button>/
        <el-button type="text" style="color: black;">页面性能详情</el-button>
    </div>
    <div class="current-page">
        <span>页面 {{pagesItemData.url}}</span>
    </div>
    <!-- 页面平均耗时说明 -->
    <div class="common-margin">
        <div class="common-block fl">
            <h1 class="h1">页面性能</h1>
            <li>
                <h1>加载时间</h1>
                <h2 class="red">{{pagesItemData.loadTime | toFixed(true)}}</h2>
            </li>
            <li>
                <h1>白屏时间</h1>
                <h2 class="red">{{pagesItemData.whiteTime | toFixed}}</h2>
            </li>
            <li>
                <h1>首像素时间</h1>
                <h2>{{pagesItemData.firstPaint | toFixed}}</h2>
            </li>
            <li>
                <h1>首次内容绘制时间</h1>
                <h2>{{pagesItemData.firstContentfulPaint | toFixed}}</h2>
            </li>
            <li>
                <h1>视觉就绪时间</h1>
                <h2>{{pagesItemData.visuallyReadyTime | toFixed}}</h2>
            </li>
            <li>
                <h1>可感知加载时间</h1>
                <h2>{{pagesItemData.perceivedLoadTime | toFixed}}</h2>
            </li>
            <li>
                <h1>DOM构建时间</h1>
                <h2>{{pagesItemData.domTime | toFixed(true)}}</h2>
            </li>
            <li>
                <h1>解析DOM时间</h1>
                <h2>{{pagesItemData.analysisDomTime | toFixed(true)}}</h2>
            </li>
            <li>
                <h1>DNS解析时间</h1>
                <h2>{{pagesItemData.dnsTime | toFixed}}</h2>
            </li>
            <li>
                <h1>TCP连接时间</h1>
                <h2>{{pagesItemData.tcpTime | toFixed}}</h2>
            </li>
            <li>
                <h1>页面重定向时间</h1>
                <h2>{{pagesItemData.redirectTime | toFixed}}</h2>
            </li>
            <li>
                <h1>unload时间</h1>
                <h2>{{pagesItemData.unloadTime | toFixed}}</h2>
            </li>
            <li>
                <h1>request请求时间</h1>
                <h2>{{pagesItemData.requestTime | toFixed}}</h2>
            </li>
            <li>
                <h1>页面准备时间</h1>
                <h2>{{pagesItemData.readyTime | toFixed}}</h2>
            </li>
        </div>
        <div class="common-block fr">
            <h1 class="h1">访问者信息</h1>
            <li>
                <h1>访问方式</h1>
                <h2>{{pagesItemData.httpInitiator === 'spa' ? '应用内跳转' : '通过url访问'}}</h2>
            </li>
            <li>
                <h1>浏览器</h1>
                <h2>{{pagesItemData.browser}}</h2>
            </li>
            <li>
                <h1>用户操作系统</h1>
                <h2>{{pagesItemData.system}}</h2>
            </li>
            <li>
                <h1>CPU并发数量</h1>
                <h2>{{pagesItemData.cpuConcurrency | toInit}}</h2>
            </li>
            <li>
                <h1>屏幕尺寸</h1>
                <h2>{{pagesItemData.screenSize}}</h2>
            </li>
            <li>
                <h1>屏幕方向</h1>
                <h2>{{pagesItemData.screenOrientation}}</h2>
            </li>
            <li>
                <h1>网络类型</h1>
                <h2>{{pagesItemData.effectiveType}}</h2>
            </li>
            <li>
                <h1>有效带宽</h1>
                <h2>{{pagesItemData.downlink | toFloat1}} Mb/s</h2>
            </li>
            <li>
                <h1>访问时间</h1>
                <h2>{{pagesItemData.createTime|date('/',true)}}</h2>
            </li>
        </div>
    </div>
    <!-- 资源请求列表 -->
    <div class="sources">
        <div class="common-block">
            <h1 class="h1">页面资源信息</h1>
            <li>
                <h1>主框架DOM节点数</h1>
                <h2>{{pagesItemData.domsNumber | toInit}}</h2>
            </li>
            <li>
                <h1>主框架script节点数</h1>
                <h2>{{pagesItemData.scriptNumber | toInit}}</h2>
            </li>
            <li>
                <h1>主框架外部script节点数</h1>
                <h2>{{pagesItemData.externalScriptNumber | toInit}}</h2>
            </li>
            <li>
                <h1>主框架HTML字节数</h1>
                <h2>{{pagesItemData.htmlSize / 1024 | toInit}} Kb</h2>
            </li>
            <li>
                <h1>主框架资源请求数</h1>
                <h2>{{pagesItemData.resourcesFetchNumber | toInit}}</h2>
            </li>
            <li>
                <h1>iframe个数</h1>
                <h2>{{pagesItemData.iframeNumber | toInit}}</h2>
            </li>
            <li>
                <h1>IMG节点个数</h1>
                <h2>{{pagesItemData.imgNumber | toInit}}</h2>
            </li>
            <li>
                <h1>LINK节点个数</h1>
                <h2>{{pagesItemData.linkNumber | toInit}}</h2>
            </li>
            <li>
                <h1>CSS节点个数</h1>
                <h2>{{pagesItemData.cssNumber | toInit}}</h2>
            </li>
            <li>
                <h1>主页中唯一域数量</h1>
                <h2>{{pagesItemData.uniqueDomainsNumber | toInit}}</h2>
            </li>
            <li>
                <h1>重定向次数</h1>
                <h2>{{pagesItemData.redirectCount | toInit}}</h2>
            </li>
        </div>
    </div>   
    <!-- 资源请求列表 -->
    <div class="sources-list">
        <h1 class="h1">网络请求瀑布流</h1>
        <h2 class="waterfall-title">子应用</h2>
        <div id="sub-app" class="waterfall-content"></div>
        <h2 class="waterfall-title">主应用</h2>
        <div id="main-app" class="waterfall-content"></div>
    </div>   
    
</div>
<script src="/js/view-page-detail-item.js"></script>
<style scoped>
.el-button+.el-button {
    margin-left: 0;
}
</style>